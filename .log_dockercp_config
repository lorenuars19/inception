name: srcs
services:
  db-cont:
    build:
      context: /home/lorenuar/code/inception/srcs/database
      dockerfile: Dockerfile
    environment:
      LOGIN: lorenuar
      PASSWD: Hello
      VOL_DB_PATH: /var/db/
      VOL_WP_PATH: /var/www/wordpress
    expose:
    - "3306"
    networks:
      net-db: null
      net-php: null
    restart: always
    volumes:
    - type: volume
      source: db-vol
      target: /var/db
      volume: {}
  nginx-cont:
    build:
      context: /home/lorenuar/code/inception/srcs/nginx
      dockerfile: Dockerfile
    environment:
      LOGIN: lorenuar
      PASSWD: Hello
      VOL_DB_PATH: /var/db/
      VOL_WP_PATH: /var/www/wordpress
    expose:
    - "443"
    networks:
      net-nginx: null
      net-php: null
    ports:
    - mode: ingress
      target: 443
      published: "443"
      protocol: tcp
    restart: always
    volumes:
    - type: volume
      source: wordpress-vol
      target: /var/www/wordpress
      volume: {}
  wordpress-cont:
    build:
      context: /home/lorenuar/code/inception/srcs/wordpress
      dockerfile: Dockerfile
    environment:
      LOGIN: lorenuar
      PASSWD: Hello
      VOL_DB_PATH: /var/db/
      VOL_WP_PATH: /var/www/wordpress
    expose:
    - "9000"
    networks:
      net-db: null
      net-php: null
    restart: always
    volumes:
    - type: volume
      source: wordpress-vol
      target: /var/www/wordpress
      volume: {}
networks:
  net-db:
    name: srcs_net-db
    driver: bridge
    internal: true
  net-nginx:
    name: srcs_net-nginx
    driver: bridge
  net-php:
    name: srcs_net-php
    driver: bridge
    internal: true
volumes:
  db-vol:
    name: srcs_db-vol
  wordpress-vol:
    name: srcs_wordpress-vol
